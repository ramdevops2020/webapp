pipeline {
    agent any
	parameters {
        string(defaultValue: '1.4.0', description: 'Specify the build version to promote to dev', name: 'version')
		booleanParam (defaultValue: false, description: 'Skip Backend Test', name : 'skipBackendTests')
    }
    options {
        disableConcurrentBuilds()
    }
	
    stages {
		stage ('Deploy') {
			steps {
				dir('/root/ansible/deploy') {
					sh  '''
						war=WebApp-"$version"."${BUILD_NUMBER}"-SNAPSHOT.war
						echo $war
						ansible-playbook deploy.yml --extra-vars "warName="$war"
						'''
					}
				}
			}
        
               
	}
	post {
         success {  
             echo 'The  pipeline ran successfully.'
         }  
       }          
}
